<?xml version="1.0" encoding="UTF-8"?>

<!--
 * See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see http://www.gnu.org/licenses/
-->

<xwikidoc version="1.1">
  <web>PhenoTips</web>
  <name>PatientClass</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <creator>xwiki:XWiki.Admin</creator>
  <creationDate>1426704841000</creationDate>
  <parent>XWiki.XWikiClasses</parent>
  <author>xwiki:XWiki.Admin</author>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <date>1426869717000</date>
  <contentUpdateDate>1426869717000</contentUpdateDate>
  <version>1.1</version>
  <title/>
  <comment/>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>true</hidden>
  <content>{{include reference="XWiki.ClassSheet"/}}</content>
  <class>
    <name>PhenoTips.PatientClass</name>
    <customClass/>
    <customMapping/>
    <defaultViewSheet/>
    <defaultEditSheet/>
    <defaultWeb/>
    <nameField/>
    <validationScript/>
    <affectedRelatives>
      <customDisplay>{{include reference="PhenoTips.YesNoNAPicker" /}}</customDisplay>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>affectedRelatives</name>
      <number>51</number>
      <prettyName>Other living affected relatives</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </affectedRelatives>
    <apgar1>
      <cache>0</cache>
      <customDisplay/>
      <disabled>0</disabled>
      <displayType>select</displayType>
      <multiSelect>0</multiSelect>
      <name>apgar1</name>
      <number>36</number>
      <picker>0</picker>
      <prettyName>APGAR score (1 minute)</prettyName>
      <relationalStorage>0</relationalStorage>
      <separator> </separator>
      <separators> ,|</separators>
      <size>1</size>
      <sort>none</sort>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <values>unknown|0|1|2|3|4|5|6|7|8|9|10</values>
      <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
    </apgar1>
    <apgar5>
      <cache>0</cache>
      <customDisplay/>
      <disabled>0</disabled>
      <displayType>select</displayType>
      <multiSelect>0</multiSelect>
      <name>apgar5</name>
      <number>37</number>
      <picker>0</picker>
      <prettyName>APGAR score (5 minutes)</prettyName>
      <relationalStorage>0</relationalStorage>
      <separator> </separator>
      <separators> ,|</separators>
      <size>1</size>
      <sort>none</sort>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <values>unknown|0|1|2|3|4|5|6|7|8|9|10</values>
      <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
    </apgar5>
    <assistedReproduction_donoregg>
      <customDisplay>{{include reference="PhenoTips.YesNoNAPicker" /}}</customDisplay>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>assistedReproduction_donoregg</name>
      <number>47</number>
      <prettyName>Donor egg</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </assistedReproduction_donoregg>
    <assistedReproduction_donorsperm>
      <customDisplay>{{include reference="PhenoTips.YesNoNAPicker" /}}</customDisplay>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>assistedReproduction_donorsperm</name>
      <number>48</number>
      <prettyName>Donor sperm</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </assistedReproduction_donorsperm>
    <assistedReproduction_fertilityMeds>
      <customDisplay>{{include reference="PhenoTips.YesNoNAPicker" /}}</customDisplay>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>assistedReproduction_fertilityMeds</name>
      <number>38</number>
      <prettyName>Conception after fertility medication</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </assistedReproduction_fertilityMeds>
    <assistedReproduction_surrogacy>
      <customDisplay>{{include reference="PhenoTips.YesNoNAPicker" /}}</customDisplay>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>assistedReproduction_surrogacy</name>
      <number>39</number>
      <prettyName>Gestational surrogacy</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </assistedReproduction_surrogacy>
    <consanguinity>
      <customDisplay>{{include reference="PhenoTips.YesNoNAPicker" /}}</customDisplay>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>select</displayFormType>
      <displayType/>
      <name>consanguinity</name>
      <number>17</number>
      <prettyName>Consanguinity</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </consanguinity>
    <date_of_birth>
      <customDisplay>{{velocity}}{{html clean=false}}
#set ($format = $services.recordConfiguration.activeConfiguration.dateOfBirthFormat)
#set ($definedFormat = "$!object.xWikiClass.get($name).getProperty('dateFormat').value")
#if ($xcontext.action == 'edit')
  #if ($value)
    #set ($value = $services.jodatime.getMutableDateTime($value.time))
    #set ($discard = $value.setZoneRetainFields($services.jodatime.UTCTimezone))
  #end
  &lt;input type='text' id='${prefix}${name}' title="$!escapetool.xml($format)" name='${prefix}${name}' class='fuzzy-date' value="$!services.jodatime.getDateTimeFormatterForPattern($definedFormat).print($value)" alt="$!services.jodatime.ISODateTimeFormatter.print($value)"/&gt;&lt;input type='hidden' name='${prefix}${name}_entered' id='${prefix}${name}_entered' value="$!{escapetool.xml($object.getProperty("${name}_entered").value)}"/&gt;
#else
#set ($enteredValue = $object.getProperty("${name}_entered").value)
#if ("$!enteredValue" != '' &amp;&amp; "$!enteredValue" != '{}')
  #set ($enteredValue = $jsontool.parse($enteredValue))
  #if ($enteredValue.decade)
    &lt;span class="date"&gt;$!escapetool.xml($enteredValue.decade)&lt;/span&gt;
  #else
    #set ($displayedValue = $format)
    #if ($enteredValue.year)
      #set ($displayedValue = $displayedValue.replaceAll('y+', $enteredValue.year))
      #if ($enteredValue.month)
        #set ($displayedValue = $displayedValue.replaceAll('M+', $enteredValue.month))
        #if ($enteredValue.day)
          #set ($displayedValue = $displayedValue.replaceAll('d+', $enteredValue.day))
        #end
      #end
    #end
    #set ($displayedValue = $displayedValue.replaceAll('[a-zA-Z]+(\W|$)', '').replaceAll('^\W+|\W+$', ''))
    &lt;span class="date"&gt;$!escapetool.xml($displayedValue)&lt;/span&gt;
  #end
#elseif ($value)
  #set ($value = $services.jodatime.getMutableDateTime($value.time))
  #set ($discard = $value.setZoneRetainFields($services.jodatime.UTCTimezone))
  &lt;span class="date"&gt;$!services.jodatime.getDateTimeFormatterForPattern($format).print($value)&lt;/span&gt;
#end
#end
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>date_of_birth</name>
      <number>6</number>
      <picker>1</picker>
      <prettyName>Date of birth</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </date_of_birth>
    <date_of_birth_entered>
      <customDisplay/>
      <disabled>0</disabled>
      <name>date_of_birth_entered</name>
      <number>45</number>
      <picker>0</picker>
      <prettyName>date_of_birth_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </date_of_birth_entered>
    <date_of_death>
      <customDisplay>{{velocity}}{{html clean=false}}
#set ($format = $services.recordConfiguration.activeConfiguration.dateOfBirthFormat)
#set ($definedFormat = "$!object.xWikiClass.get($name).getProperty('dateFormat').value")
#if ($xcontext.action == 'edit')
  #if ($value)
    #set ($value = $services.jodatime.getMutableDateTime($value.time))
    #set ($discard = $value.setZoneRetainFields($services.jodatime.UTCTimezone))
  #end
  &lt;input type='text' id='${prefix}${name}' title="$!escapetool.xml($format)" name='${prefix}${name}' class='fuzzy-date' value="$!services.jodatime.getDateTimeFormatterForPattern($definedFormat).print($value)" alt="$!services.jodatime.ISODateTimeFormatter.print($value)"/&gt;&lt;input type='hidden' name='${prefix}${name}_entered' id='${prefix}${name}_entered' value="$!{escapetool.xml($object.getProperty("${name}_entered").value)}"/&gt;
#else
#set ($enteredValue = $object.getProperty("${name}_entered").value)
#if ("$!enteredValue" != '' &amp;&amp; "$!enteredValue" != '{}')
  #set ($enteredValue = $jsontool.parse($enteredValue))
  #if ($enteredValue.decade)
    &lt;span class="date"&gt;$!escapetool.xml($enteredValue.decade)&lt;/span&gt;
  #else
    #set ($displayedValue = $format)
    #if ($enteredValue.year)
      #set ($displayedValue = $displayedValue.replaceAll('y+', $enteredValue.year))
      #if ($enteredValue.month)
        #set ($displayedValue = $displayedValue.replaceAll('M+', $enteredValue.month))
        #if ($enteredValue.day)
          #set ($displayedValue = $displayedValue.replaceAll('d+', $enteredValue.day))
        #end
      #end
    #end
    #set ($displayedValue = $displayedValue.replaceAll('[a-zA-Z]+(\W|$)', '').replaceAll('^\W+|\W+$', ''))
    &lt;span class="date"&gt;$!escapetool.xml($displayedValue)&lt;/span&gt;
  #end
#elseif ($value)
  #set ($value = $services.jodatime.getMutableDateTime($value.time))
  #set ($discard = $value.setZoneRetainFields($services.jodatime.UTCTimezone))
  &lt;span class="date"&gt;$!services.jodatime.getDateTimeFormatterForPattern($format).print($value)&lt;/span&gt;
#end
#end
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>0</emptyIsToday>
      <name>date_of_death</name>
      <number>43</number>
      <picker>1</picker>
      <prettyName>Date of death</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </date_of_death>
    <date_of_death_entered>
      <customDisplay/>
      <disabled>0</disabled>
      <name>date_of_death_entered</name>
      <number>44</number>
      <picker>0</picker>
      <prettyName>date_of_death_entered</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </date_of_death_entered>
    <date_of_death_unknown>
      <customDisplay/>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>date_of_death_unknown</name>
      <number>47</number>
      <prettyName>date_of_death_unknown</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </date_of_death_unknown>
    <diagnosis_notes>
      <customDisplay/>
      <disabled>0</disabled>
      <editor>---</editor>
      <name>diagnosis_notes</name>
      <number>29</number>
      <picker>0</picker>
      <prettyName>Additional comments</prettyName>
      <rows>5</rows>
      <size>40</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
    </diagnosis_notes>
    <exam_date>
      <customDisplay>{{velocity}}{{html clean=false}}
#set ($format = $services.recordConfiguration.activeConfiguration.dateOfBirthFormat)
#set ($definedFormat = "$!object.xWikiClass.get($name).getProperty('dateFormat').value")
#if ($xcontext.action == 'edit')
  #set ($date = $services.jodatime.mutableDateTime)
  #if ("$!xwiki.getUserPreference('timezone')" != '')
    #set ($discard = $date.setZone($services.jodatime.getTimezone($xwiki.getUserPreference('timezone'))))
  #end
  #if (!$value)
    #set ($value = $date)
  #else
    #set ($value = $services.jodatime.getMutableDateTime($value.time))
    #if ("$!xwiki.getUserPreference('timezone')" != '')
      #set ($discard = $value.setZoneRetainFields($services.jodatime.getTimezone($xwiki.getUserPreference('timezone'))))
    #end
  #end
  #if ($format.indexOf('d') &lt; 0)
    &lt;span class="month-year-date $name" id="$prefix${name}_container"&gt;
      &lt;input type="hidden" id="$prefix$name" title="$!definedFormat" name="$prefix$name" value="$!xwiki.formatDate($value.toDate(), $definedFormat)" class="xwiki-date-hidden" alt="#formatdateISO($value.toDate())"/&gt;
      #set ($selMonth = $value.monthOfYear)
      #set ($selYear= $value.year)
      #set ($mFormat = $format.replaceAll("[^M]", ''))
      #set ($yFormat = $format.replaceAll("[^y]", ''))

      &lt;select name="$prefix${name}_month" class="month"&gt;
      #foreach ($val in [1..12])
        #set ($date.monthOfYear = $val)
        &lt;option value="$mathtool.sub($val, 1)"#if ($selMonth == $val) selected="selected"#end&gt;$xwiki.formatDate($date.toDate(), $mFormat)&lt;/option&gt;
      #end
      &lt;/select&gt;

      #set ($startYear = $date.year - 99)
      #set ($endYear = $date.year + 1)

      &lt;select name="$prefix${name}_year" class="year"&gt;
      #foreach ($val in [$startYear..$endYear])
        #set ($date.year = $val)
        &lt;option value="$val"#if ($selYear == $val) selected="selected"#end&gt;$xwiki.formatDate($date.toDate(), $yFormat)&lt;/option&gt;
      #end
      &lt;/select&gt;
    &lt;/span&gt;
  #else
    &lt;input type="text" id="$prefix$name" title="$!definedFormat" name="$prefix$name" value="$!xwiki.formatDate($value.toDate(), $definedFormat)" class="xwiki-date" alt="#formatdateISO($value.toDate())"/&gt;
  #end
#else
#if ($value)
  #set ($value = $services.jodatime.getMutableDateTime($value.time))
  #if ("$!xwiki.getUserPreference('timezone')" != '')
    #set ($discard = $value.setZoneRetainFields($services.jodatime.getTimezone($xwiki.getUserPreference('timezone'))))
  #end
  &lt;span class="date"&gt;$!xwiki.formatDate($value.toDate(), $format)&lt;/span&gt;
#end
#end
{{/html}}{{/velocity}}</customDisplay>
      <dateFormat>yyyy-MM-dd</dateFormat>
      <disabled>0</disabled>
      <emptyIsToday>1</emptyIsToday>
      <name>exam_date</name>
      <number>3</number>
      <picker>1</picker>
      <prettyName>Exam date</prettyName>
      <size>20</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.DateClass</classType>
    </exam_date>
    <extended_negative_phenotype>
      <cache>0</cache>
      <classname/>
      <customDisplay/>
      <disabled>0</disabled>
      <displayType>checkbox</displayType>
      <idField/>
      <multiSelect>1</multiSelect>
      <name>extended_negative_phenotype</name>
      <number>34</number>
      <picker>0</picker>
      <prettyName>extended_negative_phenotype</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator>
</separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </extended_negative_phenotype>
    <extended_negative_prenatal_phenotype>
      <cache>0</cache>
      <classname/>
      <customDisplay/>
      <disabled>0</disabled>
      <displayType>checkbox</displayType>
      <idField/>
      <multiSelect>1</multiSelect>
      <name>extended_negative_prenatal_phenotype</name>
      <number>35</number>
      <picker>0</picker>
      <prettyName>extended_negative_prenatal_phenotype</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator>
</separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </extended_negative_prenatal_phenotype>
    <extended_phenotype>
      <cache>0</cache>
      <classname/>
      <customDisplay/>
      <disabled>0</disabled>
      <displayType>checkbox</displayType>
      <idField/>
      <multiSelect>1</multiSelect>
      <name>extended_phenotype</name>
      <number>32</number>
      <picker>0</picker>
      <prettyName>extended_phenotype</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator>
</separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </extended_phenotype>
    <extended_prenatal_phenotype>
      <cache>0</cache>
      <classname/>
      <customDisplay/>
      <disabled>0</disabled>
      <displayType>checkbox</displayType>
      <idField/>
      <multiSelect>1</multiSelect>
      <name>extended_prenatal_phenotype</name>
      <number>33</number>
      <picker>0</picker>
      <prettyName>extended_prenatal_phenotype</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator>
</separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </extended_prenatal_phenotype>
    <external_id>
      <customDisplay/>
      <disabled>0</disabled>
      <name>external_id</name>
      <number>2</number>
      <picker>0</picker>
      <prettyName>Identifier</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </external_id>
    <family_history>
      <customDisplay/>
      <disabled>0</disabled>
      <editor>---</editor>
      <name>family_history</name>
      <number>27</number>
      <picker>0</picker>
      <prettyName>List health conditions found in family (describe the relationship with proband)</prettyName>
      <rows>5</rows>
      <size>40</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
    </family_history>
    <family_of>
      <cache>0</cache>
      <classname/>
      <customDisplay>{{velocity}}
#if ($type == 'edit')
{{html clean="false"}}&lt;input class="suggested" id="${doc.fullName}_${prefix}${name}" name="${prefix}${name}" onfocus="new ajaxSuggest(this, {script: '$xwiki.getURL('', 'get', "xpage=suggest&amp;classname=${field.className}&amp;fieldname=${name}&amp;firCol=eid.value&amp;secCol=-")&amp;', varname:'input'} )" type="text" value="$!escapetool.xml($value)" /&gt;
{{/html}}
#elseif ("$!value" != '')
  #set ($matchingDocuments = $xwiki.wrapDocs($services.query.xwql("where doc.object(PhenoTips.PatientClass).external_id = :eid").bindValue('eid', $value).execute()))
  #if ($matchingDocuments.size() == 1)
    [[${value}&gt;&gt;$matchingDocuments.get(0).documentReference]]##
  #else
    $!value##
  #end
#end
{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <displayType>input</displayType>
      <idField/>
      <multiSelect>0</multiSelect>
      <name>family_of</name>
      <number>13</number>
      <picker>0</picker>
      <prettyName>This patient is part of the familiy of</prettyName>
      <relationalStorage>0</relationalStorage>
      <separator> </separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql>select eid.value from BaseObject as obj, StringProperty as eid where obj.className = 'PhenoTips.PatientClass' and eid.id.id = obj.id and eid.id.name = 'external_id'</sql>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </family_of>
    <first_name>
      <customDisplay/>
      <disabled>0</disabled>
      <name>first_name</name>
      <number>4</number>
      <picker>0</picker>
      <prettyName>First name</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </first_name>
    <gender>
      <cache>0</cache>
      <customDisplay/>
      <disabled>0</disabled>
      <displayType>radio</displayType>
      <multiSelect>0</multiSelect>
      <name>gender</name>
      <number>7</number>
      <picker>0</picker>
      <prettyName>Sex</prettyName>
      <relationalStorage>0</relationalStorage>
      <separator> </separator>
      <separators> ,|</separators>
      <size>1</size>
      <sort>none</sort>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <values>M=Male|F=Female|O=Other</values>
      <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
    </gender>
    <gestation>
      <customDisplay>{{velocity}}
#if ($type == 'edit')
  {{html clean="false"}}&lt;div class="controlled-group complete-hide"&gt;&lt;div class="controller exclude"&gt;&lt;label for="${prefix}${name}_term"&gt;&lt;input type="checkbox" name="${prefix}${name}" id="${prefix}${name}_term" value="40"#if($value == 40) checked="checked"#end /&gt; {{/html}}{{translation key="PhenoTips.PatientClass_gestation_term" /}}{{html clean="false"}}&lt;/label&gt;&lt;/div&gt;&lt;div class="controlled"&gt;&lt;input type="text" name="${prefix}${name}" value="$!{escapetool.xml($value)}" /&gt;&lt;/div&gt;&lt;/div&gt;{{/html}}
#elseif ($value == 40)
  {{translation key="PhenoTips.PatientClass_gestation_term" /}} ##
#else
  $!value
#end
{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>gestation</name>
      <number>26</number>
      <numberType>integer</numberType>
      <prettyName>Gestation at delivery (weeks)</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.NumberClass</classType>
    </gestation>
    <global_age_of_onset>
      <cache>0</cache>
      <classname/>
      <customDisplay>{{velocity}}
#set ($order = [
  'HP:0003577',
  'HP:0011460',
  'HP:0011461',
  'HP:0003623',
  'HP:0003593',
  'HP:0011463',
  'HP:0003621',
  'HP:0003581',
  'HP:0011462',
  'HP:0003596',
  'HP:0003584'
])
#set ($startWith = 'HP:0003674')
{{/velocity}}

{{include reference="PhenoTips.HPOBranchDisplayer"/}}</customDisplay>
      <disabled>0</disabled>
      <displayType>select</displayType>
      <idField/>
      <multiSelect>0</multiSelect>
      <name>global_age_of_onset</name>
      <number>8</number>
      <picker>0</picker>
      <prettyName>Global age of onset</prettyName>
      <relationalStorage>0</relationalStorage>
      <separator> </separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </global_age_of_onset>
    <global_mode_of_inheritance>
      <cache>0</cache>
      <classname/>
      <customDisplay>{{velocity}}
#set ($order = [
  'HP:0003745',

  'HP:0000006',
  'HP:0001470',
  'HP:0001475',
  'HP:0001444',
  'HP:0001452',

  'HP:0000007',

  'HP:0010985',
  'HP:0001417',
  'HP:0001423',
  'HP:0001419',
  'HP:0001450',

  'HP:0001426',
  'HP:0010984',
  'HP:0010983',
  'HP:0010982',

  'HP:0001427'
])
#set ($startWith = 'HP:0000005')
{{/velocity}}

{{include reference="PhenoTips.HPOBranchDisplayer"/}}</customDisplay>
      <disabled>0</disabled>
      <displayType>checkbox</displayType>
      <idField/>
      <multiSelect>1</multiSelect>
      <name>global_mode_of_inheritance</name>
      <number>9</number>
      <picker>0</picker>
      <prettyName>Global mode of inheritance</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator> </separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </global_mode_of_inheritance>
    <health_card>
      <customDisplay/>
      <disabled>0</disabled>
      <name>health_card</name>
      <number>11</number>
      <picker>0</picker>
      <prettyName>Provincial Health Card #</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </health_card>
    <icsi>
      <customDisplay>{{include reference="PhenoTips.YesNoNAPicker" /}}</customDisplay>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>icsi</name>
      <number>49</number>
      <prettyName>Intra-cytoplasmic sperm injection</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </icsi>
    <identifier>
      <customDisplay/>
      <disabled>0</disabled>
      <name>identifier</name>
      <number>1</number>
      <numberType>long</numberType>
      <prettyName>Identifier</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.NumberClass</classType>
    </identifier>
    <indication_for_referral>
      <customDisplay/>
      <disabled>0</disabled>
      <editor>PureText</editor>
      <name>indication_for_referral</name>
      <number>10</number>
      <picker>0</picker>
      <prettyName>Indication for referral</prettyName>
      <rows>2</rows>
      <size>40</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
    </indication_for_referral>
    <ivf>
      <customDisplay>{{include reference="PhenoTips.YesNoNAPicker" /}}</customDisplay>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>ivf</name>
      <number>16</number>
      <prettyName>In vitro fertilization</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </ivf>
    <last_name>
      <customDisplay/>
      <disabled>0</disabled>
      <name>last_name</name>
      <number>5</number>
      <picker>0</picker>
      <prettyName>Last name</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </last_name>
    <maternal_ethnicity>
      <cache>0</cache>
      <customDisplay>{{velocity filter="indent"}}{{html wiki=true clean=false}}
#if ($xcontext.action == 'edit' || $xcontext.action == 'inline')
#set ($suggest_script = $xwiki.getURL('PhenoTips.EthnicitySearch', 'get', 'outputSyntax=plain'))
{{html wiki=false clean=false}}&lt;input name="xwiki-free-multiselect-suggest-script" type="hidden" value="$!escapetool.xml($suggest_script)"/&gt;{{/html}}
#end
#macro (_fms__displayValue $v $counter) #if($xcontext.action == 'edit' || $xcontext.action == 'inline') {{html wiki=false clean=false}}&lt;input class="xwiki-free-multiselect-value" type="text" size="30" name="${prefix}${name}" id="${prefix}${name}_${counter}" value="$!escapetool.xml($v)"/&gt;{{/html}} #else $escapetool.xml($v) #end#end
(% class="xwiki-free-multiselect"%)
#foreach ($v in $value)
1. #_fms__displayValue($v ${foreach.count})

#end
#if ((!$value || $value.size() == 0) &amp;&amp; ($xcontext.action == 'edit' || $xcontext.action == 'inline'))
1. #_fms__displayValue('' 1)
#end
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <displayType>select</displayType>
      <multiSelect>1</multiSelect>
      <name>maternal_ethnicity</name>
      <number>14</number>
      <picker>1</picker>
      <prettyName>Maternal ethnicity</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator>, </separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <values/>
      <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
    </maternal_ethnicity>
    <medical_history>
      <customDisplay/>
      <disabled>0</disabled>
      <editor>---</editor>
      <name>medical_history</name>
      <number>30</number>
      <picker>0</picker>
      <prettyName>Medical and developmental history</prettyName>
      <rows>5</rows>
      <size>40</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
    </medical_history>
    <miscarriages>
      <customDisplay>{{include reference="PhenoTips.YesNoNAPicker" /}}</customDisplay>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>select</displayFormType>
      <displayType/>
      <name>miscarriages</name>
      <number>18</number>
      <prettyName>Parents with at least 3 miscarriages</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </miscarriages>
    <multipleGestation>
      <customDisplay>{{include reference="PhenoTips.YesNoNAPicker" /}}</customDisplay>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>multipleGestation</name>
      <number>52</number>
      <prettyName>Multiple gestation</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </multipleGestation>
    <negative_phenotype>
      <cache>0</cache>
      <classname/>
      <customDisplay/>
      <disabled>0</disabled>
      <displayType>input</displayType>
      <idField/>
      <multiSelect>1</multiSelect>
      <name>negative_phenotype</name>
      <number>22</number>
      <picker>0</picker>
      <prettyName>Symptoms NOT observed in this patient</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator>
</separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </negative_phenotype>
    <negative_prenatal_phenotype>
      <cache>0</cache>
      <classname/>
      <customDisplay/>
      <disabled>0</disabled>
      <displayType>select</displayType>
      <idField/>
      <multiSelect>1</multiSelect>
      <name>negative_prenatal_phenotype</name>
      <number>24</number>
      <picker>0</picker>
      <prettyName>Prenatal symptoms NOT observed in this patient</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator>
</separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </negative_prenatal_phenotype>
    <omim_id>
      <cache>0</cache>
      <classname/>
      <customDisplay>{{include reference="PhenoTips.OmimDisplay" /}}</customDisplay>
      <disabled>0</disabled>
      <displayType>input</displayType>
      <idField/>
      <multiSelect>1</multiSelect>
      <name>omim_id</name>
      <number>19</number>
      <picker>0</picker>
      <prettyName>OMIM disorder</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator>
</separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </omim_id>
    <paternal_ethnicity>
      <cache>0</cache>
      <customDisplay>{{velocity filter="indent"}}{{html wiki=true clean=false}}
#if ($xcontext.action == 'edit' || $xcontext.action == 'inline')
#set ($suggest_script = $xwiki.getURL('PhenoTips.EthnicitySearch', 'get', 'outputSyntax=plain'))
{{html wiki=false clean=false}}&lt;input name="xwiki-free-multiselect-suggest-script" type="hidden" value="$!escapetool.xml($suggest_script)"/&gt;{{/html}}
#end
#macro (_fms__displayValue $v $counter) #if($xcontext.action == 'edit' || $xcontext.action == 'inline') {{html wiki=false clean=false}}&lt;input class="xwiki-free-multiselect-value" type="text" size="30" name="${prefix}${name}" id="${prefix}${name}_${counter}" value="$!escapetool.xml($v)"/&gt;{{/html}} #else $escapetool.xml($v) #end#end
(% class="xwiki-free-multiselect"%)
#foreach ($v in $value)
1. #_fms__displayValue($v ${foreach.count})

#end
#if ((!$value || $value.size() == 0) &amp;&amp; ($xcontext.action == 'edit' || $xcontext.action == 'inline'))
1. #_fms__displayValue('' 1)
#end
{{/html}}{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <displayType>select</displayType>
      <multiSelect>1</multiSelect>
      <name>paternal_ethnicity</name>
      <number>15</number>
      <picker>1</picker>
      <prettyName>Paternal ethnicity</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator>, </separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <values/>
      <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
    </paternal_ethnicity>
    <pedigree>
      <cache>0</cache>
      <classname/>
      <customDisplay>{{include reference="PhenoTips.ImageDisplayer" /}}</customDisplay>
      <disabled>0</disabled>
      <displayType>radio</displayType>
      <idField/>
      <multiSelect>0</multiSelect>
      <name>pedigree</name>
      <number>28</number>
      <picker>0</picker>
      <prettyName>Pedigree</prettyName>
      <relationalStorage>0</relationalStorage>
      <separator> </separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </pedigree>
    <phenotype>
      <cache>0</cache>
      <classname/>
      <customDisplay>{{velocity}}
#set($config = $xwiki.getDocument("${doc.space}.WebHome").getObject('PhenoTips.DBConfigurationClass'))
#if ($config)
  {{include reference="PhenoTips.PhenotypeDisplay" /}}
#end
{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <displayType>select</displayType>
      <idField/>
      <multiSelect>1</multiSelect>
      <name>phenotype</name>
      <number>21</number>
      <picker>0</picker>
      <prettyName>Clinical symptoms &amp; physical findings</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator>
</separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </phenotype>
    <prenatal_development>
      <customDisplay/>
      <disabled>0</disabled>
      <editor>---</editor>
      <name>prenatal_development</name>
      <number>25</number>
      <picker>0</picker>
      <prettyName>Notes</prettyName>
      <rows>5</rows>
      <size>40</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
    </prenatal_development>
    <prenatal_phenotype>
      <cache>0</cache>
      <classname/>
      <customDisplay>{{velocity}}
#set($config = $xwiki.getDocument("${doc.space}.WebHome").getObject('PhenoTips.DBConfigurationClass'))
#if ($config)
  {{include reference="PhenoTips.PhenotypeDisplay" /}}
#end
{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <displayType>select</displayType>
      <idField/>
      <multiSelect>1</multiSelect>
      <name>prenatal_phenotype</name>
      <number>23</number>
      <picker>0</picker>
      <prettyName>Prenatal and Perinatal History</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator>
</separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </prenatal_phenotype>
    <proband>
      <customDisplay/>
      <defaultValue>1</defaultValue>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>proband</name>
      <number>12</number>
      <prettyName>This is the proband</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </proband>
    <reports_history>
      <cache>0</cache>
      <classname/>
      <customDisplay>{{velocity output="false"}}
#if (!$value)
  #set ($value = [])
#end
{{/velocity}}

{{include reference="PhenoTips.ImageDisplayer" /}}</customDisplay>
      <disabled>0</disabled>
      <displayType>checkbox</displayType>
      <idField/>
      <multiSelect>1</multiSelect>
      <name>reports_history</name>
      <number>31</number>
      <picker>0</picker>
      <prettyName>Reports</prettyName>
      <relationalStorage>1</relationalStorage>
      <separator> </separator>
      <separators/>
      <size>1</size>
      <sort>none</sort>
      <sql/>
      <unmodifiable>0</unmodifiable>
      <validationMessage>pdf</validationMessage>
      <validationRegExp>^application\/pdf$</validationRegExp>
      <valueField/>
      <classType>com.xpn.xwiki.objects.classes.DBListClass</classType>
    </reports_history>
    <solved>
      <customDisplay/>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>solved</name>
      <number>40</number>
      <prettyName>Case solved</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </solved>
    <solved__gene_id>
      <customDisplay>{{velocity}}
#if ($xcontext.action == 'edit')
{{html clean=false}}&lt;input type='text' name='${prefix}${name}' class='suggested suggest-gene gene-name' placeholder='Enter a gene ID' size='16' value="$!{escapetool.xml($value)}"/&gt;{{/html}}
#else
$!{value}#if("$!{value}" != ''){{html clean=false}}&lt;input type='hidden' name='gene_name' class='gene-name' value="$!{escapetool.xml($value)}"/&gt;{{/html}}#end
#end
{{/velocity}}</customDisplay>
      <disabled>0</disabled>
      <name>solved__gene_id</name>
      <number>42</number>
      <picker>0</picker>
      <prettyName>Gene ID</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </solved__gene_id>
    <solved__notes>
      <customDisplay/>
      <disabled>0</disabled>
      <editor>PureText</editor>
      <name>solved__notes</name>
      <number>46</number>
      <picker>0</picker>
      <prettyName>Resolution notes</prettyName>
      <rows>5</rows>
      <size>40</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
    </solved__notes>
    <solved__pubmed_id>
      <customDisplay/>
      <disabled>0</disabled>
      <name>solved__pubmed_id</name>
      <number>41</number>
      <picker>0</picker>
      <prettyName>Pubmed ID</prettyName>
      <size>30</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
    </solved__pubmed_id>
    <unaffected>
      <customDisplay/>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>unaffected</name>
      <number>20</number>
      <prettyName>This patient is clinically normal</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </unaffected>
  </class>
  <object>
    <name>PhenoTips.PatientClass</name>
    <number>1</number>
    <className>XWiki.ClassSheetBinding</className>
    <guid>26f66b49-19b2-4e19-9035-4ed4c309045a</guid>
    <class>
      <name>XWiki.ClassSheetBinding</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <sheet>
        <customDisplay/>
        <disabled>0</disabled>
        <name>sheet</name>
        <number>1</number>
        <picker>0</picker>
        <prettyName>Sheet</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage/>
        <validationRegExp/>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </sheet>
    </class>
    <property>
      <sheet>PatientSheet</sheet>
    </property>
  </object>
</xwikidoc>
