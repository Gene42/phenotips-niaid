<?xml version="1.0" encoding="UTF-8"?>

<!--
 * This file is subject to the terms and conditions defined in file LICENSE,
 * which is part of this source code package.
 *
 * See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
-->

<xwikidoc version="1.1">
  <web>PhenoTips</web>
  <name>FamilyGroupSheet</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <creator>xwiki:XWiki.Admin</creator>
  <creationDate>1475099017000</creationDate>
  <parent>PhenoTips.FamilyGroupClass</parent>
  <author>xwiki:XWiki.Admin</author>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <date>1475256906000</date>
  <contentUpdateDate>1475256906000</contentUpdateDate>
  <version>1.1</version>
  <title/>
  <comment/>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>false</hidden>
  <content>{{include reference="PhenoTips.PatientSheetMacros" /}}

{{velocity output=false}}
#set ($displayDocExtra = false)
$xwiki.ssx.use('PhenoTips.Skin', {'colorTheme' : "$xwiki.getSpacePreference('colorTheme')"})##
$xwiki.ssx.use('PhenoTips.PatientSheetCode', {'colorTheme' : "$xwiki.getSpacePreference('colorTheme')"})##
$xwiki.jsx.use('PhenoTips.PatientSheetCode')##
$xwiki.jsfx.use('js/xwiki/actionbuttons/actionButtons.js', true)##
{{/velocity}}

{{velocity}}
#set($obj = $doc.getObject('PhenoTips.FamilyGroupClass'))
#set($class = $obj.xWikiClass)
#set($discard = $doc.use($obj))
##
##
#if ($xcontext.action == 'edit')
  ## Disable the Preview button
  #set($previewenabled = false)
  {{html clean="false" wiki="false"}}&lt;input type='hidden' id='prefix' value='$!{class.name}_$!{obj.number}_'/&gt;{{/html}}

#end
#macro (__icon $name){{html clean="false"}}&lt;span class="fa fa-fw fa-${name}"&gt; &lt;/span&gt;{{/html}}#end
#if ($doc.getObject('PhenoTips.FamilyGroupClass'))
  #set ($colorTheme = $xwiki.getUserPreference('colorTheme'))
  #if ("$!colorTheme" != '')
  ## Make sure we use an absolute reference (see XWIKI-9672)
    #set ($colorTheme = $services.model.resolveDocument($colorTheme, $doc.documentReference))
  #end
  $xwiki.ssx.use('PhenoTips.FamilyContentTopMenu', {'colorTheme': $colorTheme})##
  $xwiki.jsx.use('PhenoTips.FamilyContentTopMenu')##
(% id="record-actions" %)(((
(% id="pr-more-actions-menu" class="menu menu-horizontal" %)(((
  #if ($xcontext.action == 'view')
    #if($hasEdit &amp;&amp; !$isReadOnly)
      #set($editaction = $doc.getDefaultEditMode())
* [[#__icon("pencil")$services.localization.render('core.menu.edit')&gt;&gt;path:$doc.getURL($editaction, $!languageparams)|| id="prActionEdit"]]
#end## HAS EDIT
    #set ($canDelete = !$doc.isNew() &amp;&amp; $xwiki.hasAccessLevel('delete'))
    #if ($canDelete)
* [[#__icon("times")$services.localization.render('core.menu.delete')&gt;&gt;path:$doc.getURL('delete', $!languageparams)|| id="prActionDelete"]]
#end## HAS DELETE
  #else## NOT IN VIEW MODE, SHOW EDIT MODE ACTIONS
* (% class="xDropdown" %){{html clean="false"}}&lt;span class="fa fa-fw fa-check"&gt; &lt;/span&gt;&lt;label&gt;&lt;input type="submit" value="$services.localization.render('phenotips.contentTopMenu.save')" name="action_saveandcontinue"/&gt;&lt;/label&gt;{{/html}}
** {{html clean="false"}}&lt;label&gt;&lt;input id="tmActionSave" type="submit" value="$services.localization.render('saveandcontinue')" title="$services.localization.render('saveandcontinue')" name="action_saveandcontinue"/&gt;&lt;/label&gt;{{/html}}
** {{html clean="false"}}&lt;label&gt;&lt;input id="tmActionSaveAndContinue" type="submit" value="$services.localization.render('saveandview')" title="$services.localization.render('saveandview')" name="action_save"/&gt;&lt;/label&gt;{{/html}}
* {{html clean="false"}}&lt;span class="fa fa-fw fa-ban"&gt; &lt;/span&gt;&lt;label&gt;&lt;input id="tmActionCancel" type="submit" value="$services.localization.render('phenotips.contentTopMenu.cancel')" title="$services.localization.render('phenotips.contentTopMenu.cancel.title')" name="action_cancel"/&gt;&lt;/label&gt;{{/html}}
#end## DONE WITH EDIT MODE SPECIFIC ACTIONS
* (% class="xDropdown" %)#__icon("cog") $services.localization.render('phenotips.contentTopMenu.moreActionsMenu')
  #if ($xcontext.action != 'view' || $viewer != 'content')
** [[$services.localization.render('phenotips.contentTopMenu.moreActionsMenu.viewMode')&gt;&gt;$doc.fullName|| title="$services.localization.render('phenotips.contentTopMenu.moreActionsMenu.viewMode.title')" target="_blank"]]
#end
  #if ($isAdvancedUser &amp;&amp; $xcontext.action != 'view' || $viewer != 'history')
** [[$services.localization.render('phenotips.contentTopMenu.moreActionsMenu.history')&gt;&gt;path:$doc.getURL('view', 'viewer=history')|| target="_blank" title="$services.localization.render('phenotips.contentTopMenu.moreActionsMenu.history.title')"]]
#end
  #if ($xwiki.getDocument($xwiki.getSpacePreference('colorTheme')).getObject('XWiki.PDFClass'))
    #set ($pdfTemplate = $xwiki.getSpacePreference('colorTheme'))
  #else
    #set ($pdfTemplate = 'PhenoTips.PatientSheetCode')
  #end
#if($isAdvancedUser)
  ** (% class="empty" %)----
** [[$services.localization.render('phenotips.contentTopMenu.moreActionsMenu.exportXAR')&gt;&gt;path:$doc.getURL('export', "format=xar&amp;name=${doc.fullName}&amp;pages=${doc.fullName}")|| class="export-link"]]
#end
#foreach ($e in $services.uix.getExtensions("org.phenotips.familyRecordMenu.moreActions"))
  #set ($extensionContent = $services.rendering.render($e.execute(), 'xhtml/1.0'))
  #if ($stringtool.isNotBlank($extensionContent) &amp;&amp; !$foreach.hasContent)
    #if (!$foreach.hasContent)
      ** ----
      #set ($foreach.hasContent = true)
    #end
    ** {{html clean=false}}$extensionContent{{/html}}
  #end
  #end
)))## menu
)))## container
#end

(% class="clear clinical-info test chapter" %)(((
  == Basic data ==

  #__display2Col ('name' '' '' '')

  #__display2Col ('description' '' '' '')
)))
{{/velocity}}</content>
</xwikidoc>
